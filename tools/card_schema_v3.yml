# Card Schema v3 - Flexible, template-based system
version: v3

# Core fields that apply to all cards
core_fields:
  required:
    - front
    - back
    - tags
    - created
    - updated
  optional:
    - sources
    - mnemonic
    - why_it_matters
    - diagram

# Card templates with their specific requirements
templates:
  concept:
    description: Core legal concepts and principles
    required_fields:
      - definition
      - key_authorities
    recommended_fields:
      - diagram
      - application
    word_limits:
      front: 5-15 words
      back: 50-300 words

  case:
    description: Case law analysis
    required_fields:
      - citation
      - court
      - year
      - key_principles
    recommended_fields:
      - facts
      - ratio
      - significance
    word_limits:
      front: 10-25 words
      back: 100-400 words

  statute:
    description: Legislative provisions
    required_fields:
      - act_name
      - jurisdiction
      - section_number
      - text
    recommended_fields:
      - interpretation_notes
      - related_sections
      - case_authorities
    word_limits:
      front: 10-30 words
      back: 50-300 words

  issue_spotting:
    description: Problem question elements
    required_fields:
      - legal_issues
      - relevant_law
      - application
    recommended_fields:
      - counter_arguments
      - conclusion
    word_limits:
      front: 10-30 words
      back: 200-500 words

# Cross-cutting validation rules
validation:
  front:
    max_words: 30
    should_end_with_question: true
    allow_multiple_questions: false

  back:
    min_words: 50
    max_words: 500
    max_sentence_words: 32

  authorities:
    max_per_card: 8
    require_citations: true
    allow_persuasive: true
    require_pinpoints: true

  tags:
    min: 1
    max: 8
    enforce_lowercase: true

# Schema evolution
migration:
  from_v2a:
    field_mapping:
      "why_it_matters": "significance"
      "anchors": "key_authorities"
    deprecated_fields:
      - "tripwires"
      - "diagram"  # Now optional

# Metadata
_meta:
  created: 2025-09-25
  author: Flashcard Processor v3
  description: Flexible schema supporting multiple card types with template-specific validation
